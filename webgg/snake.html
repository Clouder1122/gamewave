
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Snake - Gamewave</title>
<style>
body {
  font-family: Arial, sans-serif;
  margin: 0;
  background: #1d2b7f;
  color: white;
  display: flex;
  flex-direction: column;
  align-items: center;
}
h1 { margin: 20px 0; font-size: 2.5rem; text-align: center; }
#game-container { display: flex; flex-direction: column; align-items: center; }
canvas { background: #2f3ea0; border: 3px solid #ffffff80; border-radius: 15px; touch-action: none; }
.controls { margin: 15px 0; }
button {
  padding: 10px 20px;
  margin: 0 5px;
  background: #ff5252;
  border: none;
  border-radius: 10px;
  cursor: pointer;
  font-weight: bold;
  color: white;
  transition: 0.2s;
}
button:hover { background: #ff1744; }
#score, #leaderboard { font-size: 1.2rem; margin-top: 10px; }
#leaderboard { max-width: 400px; text-align: left; }
</style>
</head>
<body>
<h1>Snake - Gamewave</h1>

<div id="game-container">
  <canvas id="snake-game" width="400" height="400"></canvas>
  <div class="controls">
    <button onclick="startGame()">Start / Restart</button>
    <button onclick="togglePause()"><span id="pauseBtn">Pause</span></button>
  </div>
  <div id="score">Score: 0</div>
  <div id="leaderboard"><strong>Leaderboard:</strong><br></div>
</div>

<!-- Sound Effects -->
<audio id="eatSound" src="https://freesound.org/data/previews/256/256113_3263906-lq.mp3"></audio>
<audio id="gameOverSound" src="https://freesound.org/data/previews/331/331912_3248244-lq.mp3"></audio>
<audio id="levelUpSound" src="https://freesound.org/data/previews/106/106536_80412-lq.mp3"></audio>

<script>
const canvas = document.getElementById("snake-game");
const ctx = canvas.getContext("2d");

const gridSize = 20;
const tileCount = canvas.width / gridSize;

let snake = [];
let food = {};
let dx = 1, dy = 0;
let score = 0;
let gameInterval;
let speed = 150;
let paused = false;

let touchStartX = 0;
let touchStartY = 0;

// Particles
let particles = [];

// Sounds
const eatSound = document.getElementById("eatSound");
const gameOverSound = document.getElementById("gameOverSound");
const levelUpSound = document.getElementById("levelUpSound");

// Textures
function createSnakeTexture(){
  const patternCanvas = document.createElement("canvas");
  patternCanvas.width = gridSize;
  patternCanvas.height = gridSize;
  const pctx = patternCanvas.getContext("2d");
  pctx.fillStyle = "#ffffff";
  pctx.fillRect(0,0,gridSize,gridSize);
  pctx.fillStyle = "#cccccc";
  pctx.fillRect(0,0,gridSize/2,gridSize/2);
  return ctx.createPattern(patternCanvas,"repeat");
}

function createFoodTexture(){
  const patternCanvas = document.createElement("canvas");
  patternCanvas.width = gridSize;
  patternCanvas.height = gridSize;
  const pctx = patternCanvas.getContext("2d");
  pctx.fillStyle = "#ff5252";
  pctx.fillRect(0,0,gridSize,gridSize);
  pctx.fillStyle = "#ff1744";
  pctx.beginPath();
  pctx.arc(gridSize/2,gridSize/2,gridSize/4,0,2*Math.PI);
  pctx.fill();
  return ctx.createPattern(patternCanvas,"repeat");
}

const snakePattern = createSnakeTexture();
const foodPattern = createFoodTexture();

// Leaderboard
function updateLeaderboard(){
  let scores = JSON.parse(localStorage.getItem("snakeScores")||"[]");
  if(score>0 && !scores.includes(score)) scores.push(score);
  scores.sort((a,b)=>b-a);
  if(scores.length>5) scores = scores.slice(0,5);
  localStorage.setItem("snakeScores", JSON.stringify(scores));
  const lb = document.getElementById("leaderboard");
  lb.innerHTML="<strong>Leaderboard:</strong><br>"+scores.join("<br>");
}

// Reset
function resetGame(){
  snake = [{x:10,y:10}];
  dx = 1; dy = 0;
  score = 0;
  spawnFood();
  document.getElementById("score").innerText="Score: 0";
  particles = [];
}

// Start game
function startGame(){
  clearInterval(gameInterval);
  paused=false;
  document.getElementById("pauseBtn").innerText="Pause";
  resetGame();
  gameInterval = setInterval(gameLoop,speed);
}

// Pause toggle
function togglePause(){
  if(paused){
    gameInterval = setInterval(gameLoop,speed);
    paused=false;
    document.getElementById("pauseBtn").innerText="Pause";
  } else {
    clearInterval(gameInterval);
    paused=true;
    document.getElementById("pauseBtn").innerText="Resume";
  }
}

// Spawn food
function spawnFood(){
  food.x=Math.floor(Math.random()*tileCount);
  food.y=Math.floor(Math.random()*tileCount);
  while(snake.some(s=>s.x===food.x && s.y===food.y)){
    food.x=Math.floor(Math.random()*tileCount);
    food.y=Math.floor(Math.random()*tileCount);
  }
}

// Game loop
function gameLoop(){
  const head = {x:snake[0].x+dx, y:snake[0].y+dy};
  if(head.x<0 || head.x>=tileCount || head.y<0 || head.y>=tileCount || snake.some(s=>s.x===head.x && s.y===head.y)){
    clearInterval(gameInterval);
    gameOverSound.play();
    alert("Game Over! Your score: "+score);
    updateLeaderboard();
    return;
  }

  snake.unshift(head);

  if(head.x===food.x && head.y===food.y){
    score++;
    document.getElementById("score").innerText="Score: "+score;
    spawnFood();
    eatSound.currentTime=0; eatSound.play();
    createParticles(head.x*gridSize, head.y*gridSize);
    if(score%5===0 && speed>50){
      speed-=10;
      levelUpSound.currentTime=0; levelUpSound.play();
      clearInterval(gameInterval);
      gameInterval=setInterval(gameLoop,speed);
    }
  } else snake.pop();

  updateParticles();
  drawGame();
}

// Particles
function createParticles(x,y){
  for(let i=0;i<15;i++){
    particles.push({
      x: x+gridSize/2,
      y: y+gridSize/2,
      dx: (Math.random()-0.5)*4,
      dy: (Math.random()-0.5)*4,
      alpha: 1
    });
  }
}
function updateParticles(){
  particles.forEach(p=>{
    p.x+=p.dx; p.y+=p.dy; p.alpha-=0.05;
  });
  particles = particles.filter(p=>p.alpha>0);
}

// Draw game
function drawGame(){
  ctx.fillStyle="#2f3ea0";
  ctx.fillRect(0,0,canvas.width,canvas.height);

  // particles
  particles.forEach(p=>{
    ctx.fillStyle=`rgba(255,255,255,${p.alpha})`;
    ctx.beginPath();
    ctx.arc(p.x,p.y,3,0,2*Math.PI);
    ctx.fill();
  });

  // food
  ctx.fillStyle=foodPattern;
  ctx.fillRect(food.x*gridSize, food.y*gridSize, gridSize, gridSize);

  // snake
  snake.forEach((s,i)=>{
    ctx.fillStyle=snakePattern;
    ctx.fillRect(s.x*gridSize, s.y*gridSize, gridSize, gridSize);
    if(i===0){
      ctx.strokeStyle="#ffffff";
      ctx.lineWidth=2;
      ctx.strokeRect(s.x*gridSize, s.y*gridSize, gridSize, gridSize);
    }
  });
}

// Keyboard
document.addEventListener("keydown", e=>{
  switch(e.key){
    case "ArrowUp": if(dy===0){dx=0;dy=-1;} break;
    case "ArrowDown": if(dy===0){dx=0;dy=1;} break;
    case "ArrowLeft": if(dx===0){dx=-1;dy=0;} break;
    case "ArrowRight": if(dx===0){dx=1;dy=0;} break;
  }
});

// Mobile swipe
canvas.addEventListener("touchstart", e=>{
  const t = e.touches[0];
  touchStartX=t.clientX; touchStartY=t.clientY;
},{passive:true});
canvas.addEventListener("touchend", e=>{
  const t = e.changedTouches[0];
  const dxTouch=t.clientX-touchStartX;
  const dyTouch=t.clientY-touchStartY;
  if(Math.abs(dxTouch)>Math.abs(dyTouch)){
    if(dxTouch>0 && dx===0){ dx=1;dy=0; } 
    else if(dxTouch<0 && dx===0){ dx=-1;dy=0; }
  } else {
    if(dyTouch>0 && dy===0){ dx=0;dy=1; } 
    else if(dyTouch<0 && dy===0){ dx=0;dy=-1; }
  }
},{passive:true});

// Default game
startGame();
updateLeaderboard();
</script>
</body>
</html>
