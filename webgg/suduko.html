
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Sudoku - Gamewave</title>
<style>
body {
  font-family: Arial, sans-serif;
  margin: 0;
  background: #1d2b7f;
  color: white;
  display: flex;
  flex-direction: column;
  align-items: center;
}
h1 { text-align:center; font-size:2.5rem; margin:20px 0; }
.controls { margin-bottom:15px; }
.controls button {
  margin: 0 5px; padding:10px 15px; background:#ff5252;
  border:none; border-radius:10px; cursor:pointer; font-weight:bold; color:white;
  transition:0.2s;
}
.controls button:hover { background:#ff1744; }
#timer { margin-left:15px; font-weight:bold; }
table { border-collapse:collapse; margin-bottom:20px; }
td { width:50px; height:50px; text-align:center; vertical-align:middle;
     border:1px solid #ffffff80; font-size:20px; color:white; background:#2f3ea0; }
td input { width:100%; height:100%; text-align:center; font-size:20px; background:transparent; color:white; border:none; }
td input:focus { outline:2px solid #ff5252; }
.bold-border-right { border-right:2px solid white; }
.bold-border-bottom { border-bottom:2px solid white; }
.conflict { background:#ff174480 !important; }
</style>
</head>
<body>
<h1>Sudoku - Gamewave</h1>

<div class="controls">
  <button onclick="startGame('easy')">Easy</button>
  <button onclick="startGame('medium')">Medium</button>
  <button onclick="startGame('hard')">Hard</button>
  <button onclick="resetGame()">Reset</button>
  <button onclick="checkSolution()">Check</button>
  <button onclick="autoSolve()">Auto Solve</button>
  <span id="timer">Time: 00:00</span>
</div>

<table id="sudoku-board"></table>

<script>
let board = [];
let solution = [];
let timerInterval;
let seconds = 0;

// Generate a full Sudoku solution
function generateFullBoard(board) {
  const empty = findEmpty(board);
  if(!empty) return true;
  let [row,col] = empty;
  let nums = [1,2,3,4,5,6,7,8,9].sort(()=>Math.random()-0.5);
  for(let num of nums){
    if(isSafe(board,row,col,num)){
      board[row][col]=num;
      if(generateFullBoard(board)) return true;
      board[row][col]=0;
    }
  }
  return false;
}

function findEmpty(board){
  for(let i=0;i<9;i++){
    for(let j=0;j<9;j++){
      if(board[i][j]===0) return [i,j];
    }
  }
  return null;
}

function isSafe(board,row,col,num){
  for(let i=0;i<9;i++){
    if(board[row][i]===num) return false;
    if(board[i][col]===num) return false;
  }
  const startRow=Math.floor(row/3)*3;
  const startCol=Math.floor(col/3)*3;
  for(let i=0;i<3;i++){
    for(let j=0;j<3;j++){
      if(board[startRow+i][startCol+j]===num) return false;
    }
  }
  return true;
}

// Generate puzzle based on difficulty
function generatePuzzle(level){
  let newBoard = Array.from({length:9},()=>Array(9).fill(0));
  generateFullBoard(newBoard);
  solution = JSON.parse(JSON.stringify(newBoard));

  let removeCount;
  if(level==='easy') removeCount=30;
  else if(level==='medium') removeCount=40;
  else removeCount=50;

  while(removeCount>0){
    let i=Math.floor(Math.random()*9);
    let j=Math.floor(Math.random()*9);
    if(newBoard[i][j]!==0){
      newBoard[i][j]=0;
      removeCount--;
    }
  }
  return newBoard;
}

// Render board
function renderBoard(){
  const table=document.getElementById("sudoku-board");
  table.innerHTML="";
  for(let i=0;i<9;i++){
    const row=document.createElement("tr");
    for(let j=0;j<9;j++){
      const cell=document.createElement("td");
      if((j+1)%3===0 && j!==8) cell.classList.add("bold-border-right");
      if((i+1)%3===0 && i!==8) cell.classList.add("bold-border-bottom");

      if(board[i][j]!==0){
        cell.textContent = board[i][j];
        cell.style.color="white";
      } else {
        const input = document.createElement("input");
        input.type="text";
        input.maxLength = 1;
        input.style.color="white";

        input.oninput = () => {
          if(!/^[1-9]$/.test(input.value)){ input.value=""; }
          board[i][j] = parseInt(input.value)||0;
          checkConflicts();
          updateColors();
        };

        input.onkeydown = (e) => {
          if(!(/[1-9]/.test(e.key) || e.key==="Backspace"||e.key==="Delete"||e.key==="ArrowLeft"||e.key==="ArrowRight")){
            e.preventDefault();
          }
        };

        cell.appendChild(input);
      }
      row.appendChild(cell);
    }
    table.appendChild(row);
  }
}

// Timer
function updateTimer(){
  seconds++;
  const mins=String(Math.floor(seconds/60)).padStart(2,'0');
  const secs=String(seconds%60).padStart(2,'0');
  document.getElementById("timer").innerText=`Time: ${mins}:${secs}`;
}

// Start game
function startGame(level){
  clearInterval(timerInterval);
  seconds=0;
  document.getElementById("timer").innerText="Time: 00:00";
  board=generatePuzzle(level);
  renderBoard();
  timerInterval=setInterval(updateTimer,1000);
}

// Check conflicts
function checkConflicts(){
  const cells=document.querySelectorAll("td input");
  cells.forEach(c=>c.classList.remove("conflict"));
  for(let i=0;i<9;i++){
    for(let j=0;j<9;j++){
      const val=board[i][j];
      if(val===0) continue;
      for(let k=0;k<9;k++){
        if(k!==j && board[i][k]===val){
          const cell=document.querySelectorAll("tr")[i].children[k].querySelector("input");
          if(cell) cell.classList.add("conflict");
          const cell2=document.querySelectorAll("tr")[i].children[j].querySelector("input");
          if(cell2) cell2.classList.add("conflict");
        }
        if(k!==i && board[k][j]===val){
          const cell=document.querySelectorAll("tr")[k].children[j].querySelector("input");
          if(cell) cell.classList.add("conflict");
          const cell2=document.querySelectorAll("tr")[i].children[j].querySelector("input");
          if(cell2) cell2.classList.add("conflict");
        }
      }
      const startRow=Math.floor(i/3)*3;
      const startCol=Math.floor(j/3)*3;
      for(let r=startRow;r<startRow+3;r++){
        for(let c=startCol;c<startCol+3;c++){
          if((r!==i || c!==j) && board[r][c]===val){
            const cell=document.querySelectorAll("tr")[r].children[c].querySelector("input");
            if(cell) cell.classList.add("conflict");
            const cell2=document.querySelectorAll("tr")[i].children[j].querySelector("input");
            if(cell2) cell2.classList.add("conflict");
          }
        }
      }
    }
  }
  updateColors();
}

// Update colors for correct/incorrect inputs
function updateColors(){
  for(let i=0;i<9;i++){
    for(let j=0;j<9;j++){
      const cellInput=document.querySelectorAll("tr")[i].children[j].querySelector("input");
      if(cellInput){
        if(board[i][j]===0){
          cellInput.style.color="white";
        } else if(board[i][j]===solution[i][j]){
          cellInput.style.color="white";
        } else {
          cellInput.style.color="red";
        }
      }
    }
  }
}

// Reset game
function resetGame(){ startGame('easy'); }

// Check solution
function checkSolution(){
  let correct=true;
  for(let i=0;i<9;i++){
    for(let j=0;j<9;j++){
      if(board[i][j]!==solution[i][j]){
        correct=false;
        break;
      }
    }
  }
  if(correct){
    alert("Congratulations! Sudoku solved!");
    clearInterval(timerInterval);
  } else {
    alert("There are still mistakes or empty cells. Keep trying!");
  }
}

// Auto-solver
function autoSolve(){ solveBoard(board); renderBoard(); clearInterval(timerInterval); }

function solveBoard(bd){
  const empty=findEmpty(bd);
  if(!empty) return true;
  let [row,col]=empty;
  for(let num=1;num<=9;num++){
    if(isSafe(bd,row,col,num)){
      bd[row][col]=num;
      if(solveBoard(bd)) return true;
      bd[row][col]=0;
    }
  }
  return false;
}

// Start default easy game on load
startGame('easy');
</script>
</body>
</html>
